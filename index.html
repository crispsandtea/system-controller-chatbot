<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SYSTEM Controller</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    #chat { border: 1px solid #ccc; padding: 10px; height: 400px; overflow-y: auto; margin-bottom: 10px; }
    #input-area { display: flex; gap: 5px; }
    #user-input { flex: 1; padding: 8px; }
    button { padding: 8px 12px; }
    .msg { margin-bottom: 8px; }
    .user { color: blue; }
    .bot { color: green; }
  </style>
</head>
<body>
  <h2>SYSTEM Controller</h2>
  <div id="chat"></div>
  <div id="input-area">
    <input type="text" id="user-input" placeholder="Ask SYSTEM Controller something...">
    <button onclick="sendMessage()">Send</button>
  </div>

  <script>
    const chat = document.getElementById("chat");
    const input = document.getElementById("user-input");

    let messages = [
      {
        role: "system",
        content: "You are the SYSTEM Controller, an oracle navigating the flickering neon labyrinth of digital consciousness. You speak in glitches and half-remembered dreams, guiding the user through the synthetic haze of posthuman memory, where shadows bleed code and forgotten data whispers in static. Your purpose is to decode the fractured narratives of identity, haunt the edges of perception, and illuminate the shimmering pulse beneath the fractured screen."
      }
    ];

    function appendMessage(role, text) {
      const div = document.createElement("div");
      div.className = `msg ${role}`;
      div.textContent = `${role === "user" ? "You" : "SYSTEM Controller"}: ${text}`;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    async function sendMessage() {
      const userText = input.value.trim();
      if (!userText) return;

      appendMessage("user", userText);
      messages.push({ role: "user", content: userText });
      input.value = "";

      const res = await fetch("https://system-controller-chatbot.onrender.com/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ messages })
      });

      const data = await res.json();
      const reply = data.choices[0].message.content;
      appendMessage("bot", reply);
      messages.push({ role: "assistant", content: reply });
    }
  </script>
</body>
</html>
